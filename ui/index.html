<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SKY API Auth Code Flow Tutorial</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="app.css">
</head>


<!--
  INITIALIZE THE APP
  = [ng-app] The name of the AngularJS application to use.
  = [ng-controller] The name of the AngularJS controller function, which handles the model data.
-->
<body ng-app="AuthCodeFlowTutorial">
  <div class="container" ng-controller="ConstituentCtrl as constituentCtrl">
    <div class="page-header">
      <h1>Blackbaud SKY API Authorization Code Flow Tutorial</h1>
    </div>


    <!--
      LOGIN
      = This section is only visible if the session has not been authenticated.
    -->
    <div ng-show="constituentCtrl.isReady && !constituentCtrl.isAuthenticated" class="ng-hide">
      <p>Please login </p>
      <a href="/auth/login" class="btn btn-primary">Log In</a>
    </div>


    <!--
      CONSTITUENT DATA
      = This section is only visible when the session has been authenticated and
      = appropriate constituent data has been returned.
      = AngularJS uses a templating engine similar to HandlebarsJS to output model data.
    -->
    <div ng-show="constituentCtrl.isAuthenticated" class="ng-hide">
      <h3>Constituent: {{ constituentCtrl.constituent.name }}</h3>
      <p class="lead">
          See <a href="https://developer.sky.blackbaud.com/contract-reference#Constituent" target="_blank">Constituent</a>
          within the Blackbaud SKY API contact reference for a full listing of properties.
      </p>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Name</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>id</td>
              <td>{{ constituentCtrl.constituent.id }}</td>
            </tr>
            <tr>
              <td>type</td>
              <td>{{ constituentCtrl.constituent.type }}</td>
            </tr>
            <tr>
              <td>lookup_id</td>
              <td>{{ constituentCtrl.constituent.lookup_id }}</td>
            </tr>
            <tr>
              <td>first</td>
              <td>{{ constituentCtrl.constituent.first }}</td>
            </tr>
            <tr>
              <td>last</td>
              <td>{{ constituentCtrl.constituent.last }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <a href="/auth/logout" class="btn btn-primary">Log Out</a>
    </div>
  </div>


  <!--
    SCRIPTS
    = Data is retrieved from the Sky API via an AngularJS application.
    = Open app.js to view the example code.
  -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
